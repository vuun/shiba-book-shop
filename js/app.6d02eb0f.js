(function(t){function e(e){for(var n,o,c=e[0],s=e[1],l=e[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,c=1;c<i.length;c++){var s=i[c];0!==a[s]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},a={app:0},r=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/shiba-book-shop/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=i("2f62"),r={cartList:[]},o=r,c={},s=c,l={addBook:function(t,e){var i=t.commit;i("addBook",e)},decreaseBook:function(t,e){var i=t.commit;i("decreaseBook",e)},deleteBook:function(t,e){var i=t.commit;i("deleteBook",e)},clearCart:function(t){var e=t.commit;e("clearCart")}},u=l,d=(i("4de4"),i("7db0"),{addBook:function(t,e){t.cartList.find((function(t){return t.title===e.title}))?t.cartList.find((function(t){return t.title===e.title})).count+=1:t.cartList.push({cover:e.cover,id:e.id,price:e.price,title:e.title,count:1})},decreaseBook:function(t,e){t.cartList.find((function(t){return t.title===e.title}))&&(t.cartList.find((function(t){return t.title===e.title})).count>1?t.cartList.find((function(t){return t.title===e.title})).count-=1:t.cartList=t.cartList.filter((function(t){return t.title!==e.title})))},deleteBook:function(t,e){t.cartList=t.cartList.filter((function(t){return t.title!==e.title}))},clearCart:function(t){t.cartList=[]}}),f=d,h={namespaced:!0,state:o,mutations:f,actions:u,getters:s},p=h;n["a"].use(a["a"]);var v=new a["a"].Store({modules:{data:p}}),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("v-app",[i("home")],1)],1)},g=[],b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Cart",{attrs:{drawer:t.drawer},on:{close:function(e){t.drawer=!1}}}),i("v-app-bar",{attrs:{app:"",color:"indigo darken-4",dark:""}},[i("v-spacer"),i("v-toolbar-title",[t._v("Shiba Book Shop")]),i("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}})],1),i("v-content",[i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[i("Shelf")],1)],1),i("v-footer",{attrs:{color:"indigo darken-4",app:""}},[i("v-spacer"),i("span",{staticClass:"white--text"},[t._v("© 2020")])],1)],1)},P=[],k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-navigation-drawer",{attrs:{app:"",right:"",width:"450"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[i("v-simple-table",{attrs:{"fixed-header":"",height:"400px"},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left",attrs:{id:"name",width:"65%"}},[t._v("Title")]),i("th",{attrs:{id:"delete",width:"1%"}}),i("th",{staticClass:"text-left",attrs:{id:"quan",width:"5%"}},[t._v("QTY")]),i("th",{attrs:{id:"add",width:"1%"}}),i("th",{staticClass:"text-left",attrs:{id:"price",width:"27%"}},[t._v("Price")]),i("th",{attrs:{id:"deleteall",width:"1%"}})])]),i("tbody",t._l(t.cartList,(function(e){return i("tr",{key:e.title+new Date},[i("td",[t._v(t._s(e.title))]),i("td",[i("v-btn",{staticClass:"minus",attrs:{outlined:"",fab:"","max-width":"25px","max-height":"25px",dark:"",color:"red"},on:{click:function(i){return t.decreaseBook(e)}}},[i("v-icon",[t._v("mdi-minus")])],1)],1),i("td",[t._v(t._s(e.count))]),i("td",[i("v-btn",{staticClass:"plus",attrs:{outlined:"",fab:"","max-width":"25px","max-height":"25px",dark:"",color:"green"},on:{click:function(i){return t.addBook(e)}}},[i("v-icon",[t._v("mdi-plus")])],1)],1),i("td",[t._v(t._s(e.count*Number(e.price))+" ฿")]),i("td",[i("v-btn",{staticClass:"delete",attrs:{outlined:"",fab:"","max-width":"25px","max-height":"25px",dark:"",color:"red"},on:{click:function(i){return t.deleteBook(e)}}},[i("v-icon",[t._v("mdi-delete")])],1)],1)])})),0)]},proxy:!0}])}),i("v-list",{attrs:{dense:""}},[i("v-divider"),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v("Discount")])],1),i("v-list-item-icon",[t._v("- "+t._s(t.discountPrice)+" ฿")])],1),i("v-divider"),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v("Total")])],1),i("v-list-item-icon",[t._v(t._s(t.totalPrice)+" ฿")])],1),i("v-list-item",[i("v-list-item-content",[i("v-text-field",{attrs:{mask:"#######",suffix:"THB",label:"Credit"},model:{value:t.credit,callback:function(e){t.credit=e},expression:"credit"}})],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-btn",{staticClass:"btnCharge",attrs:{disabled:t.cartLength<=0||""===t.credit,color:"white--text indigo darken-4"},on:{click:function(e){return t.Calculate()}}},[t._v("Charge")])],1)],1),i("v-spacer"),i("v-list-item",[i("v-list-item-content",[i("v-btn",{staticClass:"btnCloseDialog",attrs:{color:"white--text indigo darken-4"},on:{click:function(e){return t.closeDialog()}}},[t._v("Go to Bookshelf")])],1)],1)],1),i("v-dialog",{attrs:{"max-width":"280"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[t.change<0?i("v-card-title",{staticClass:"red--text headline"},[t._v("Not Enough Cash")]):t._e(),t.change<0?i("v-simple-table",{attrs:{height:"150px"},scopedSlots:t._u([{key:"default",fn:function(){return[i("tbody",[i("tr",[i("td",[t._v("Credit")]),i("td",[t._v(t._s(t.credit)+" ฿")])]),i("tr",[i("td",[t._v("Total")]),i("td",[t._v(t._s(t.totalPrice)+" ฿")])]),i("tr",{staticClass:"red--text"},[i("td",[t._v("Need")]),i("td",[t._v(t._s(-t.change)+" ฿")])])])]},proxy:!0}],null,!1,860682637)}):t._e(),t.change>=0?i("v-card-title",{staticClass:"green--text headline"},[t._v(" Purchase Successful")]):t._e(),t.change>=0?i("v-simple-table",{attrs:{"fixed-header":"",height:"150px"},scopedSlots:t._u([{key:"default",fn:function(){return[i("tbody",[i("tr",[i("td",[t._v("Credit")]),i("td",[t._v(t._s(t.credit)+" ฿")])]),i("tr",[i("td",[t._v("Total")]),i("td",[t._v(t._s(t.totalPrice)+" ฿")])]),i("tr",[i("td",[t._v("Change")]),i("td",[t._v(t._s(t.change)+" ฿")])])])]},proxy:!0}],null,!1,3817172676)}):t._e()],1)],1)],1)},_=[],H=(i("4160"),i("a9e3"),i("159b"),i("5530")),w={name:"Cart",props:{drawer:{type:Boolean,default:!0}},data:function(){return{dialog:!1,credit:"",discountPrice:0,HPBooks:{HP1:null,HP2:null,HP3:null,HP4:null,HP5:null,HP6:null,HP7:null}}},computed:Object(H["a"])(Object(H["a"])({},Object(a["b"])("data",{cartList:function(t){return t.cartList}})),{},{totalPrice:function(){var t=0;return this.cartList.forEach((function(e){t+=e.count*Number(e.price)})),t-=this.discountPrice,t},change:function(){return this.credit-this.totalPrice},cartLength:function(){return this.cartList.length}}),watch:{dialog:function(){!1===this.dialog&&this.change>=0&&this.clear()}},updated:function(){this.getAllHPBook(),this.CalculateDiscount()},methods:{closeDialog:function(){this.$emit("close")},addBook:function(t){this.$store.dispatch("data/addBook",t)},deleteBook:function(t){this.$store.dispatch("data/deleteBook",t)},decreaseBook:function(t){this.$store.dispatch("data/decreaseBook",t)},Calculate:function(){this.dialog=!0},findHP:function(t){var e=this.cartList.find((function(e){return e.id===t}));return e?JSON.parse(JSON.stringify(e)):null},getAllHPBook:function(){this.HPBooks={HP1:this.findHP("9781408855652"),HP2:this.findHP("9781408855669"),HP3:this.findHP("9781408855676"),HP4:this.findHP("9781408855683"),HP5:this.findHP("9781408855690"),HP6:this.findHP("9781408855706"),HP7:this.findHP("9781408855713")}},CalculateDiscount:function(){var t=0,e=0,i=[0,0,10,11,12,13,14,15],n=0,a=!0,r=JSON.parse(JSON.stringify(this.HPBooks));while(a){if(r.HP1&&r.HP1.count>0&&(t+=1,r.HP1.count-=1,n+=Number(r.HP1.price)),r.HP2&&r.HP2.count>0&&(t+=1,r.HP2.count-=1,n+=Number(r.HP2.price)),r.HP3&&r.HP3.count>0&&(t+=1,r.HP3.count-=1,n+=Number(r.HP3.price)),r.HP4&&r.HP4.count>0&&(t+=1,r.HP4.count-=1,n+=Number(r.HP4.price)),r.HP5&&r.HP5.count>0&&(t+=1,r.HP5.count-=1,n+=Number(r.HP5.price)),r.HP6&&r.HP6.count>0&&(t+=1,r.HP6.count-=1,n+=Number(r.HP6.price)),r.HP7&&r.HP7.count>0&&(t+=1,r.HP7.count-=1,n+=Number(r.HP7.price)),1===t||0===t)return void(this.discountPrice=e);e+=n*i[t]/100,t=0,n=0}},clear:function(){this.$store.dispatch("data/clearCart"),this.credit="",this.discountPrice=0}}},x=w,C=i("2877"),y=i("6544"),L=i.n(y),B=i("8336"),V=i("b0af"),O=i("99d9"),S=i("169a"),j=i("ce7e"),T=i("132d"),N=i("8860"),$=i("da13"),D=i("5d23"),I=i("34c3"),A=i("f774"),E=i("1f4f"),J=i("2fa4"),M=i("8654"),R=Object(C["a"])(x,k,_,!1,null,null,null),F=R.exports;L()(R,{VBtn:B["a"],VCard:V["a"],VCardTitle:O["b"],VDialog:S["a"],VDivider:j["a"],VIcon:T["a"],VList:N["a"],VListItem:$["a"],VListItemContent:D["a"],VListItemIcon:I["a"],VListItemTitle:D["b"],VNavigationDrawer:A["a"],VSimpleTable:E["a"],VSpacer:J["a"],VTextField:M["a"]});var q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{attrs:{wrap:""}},[i("v-pagination",{attrs:{length:t.shelfLength},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),i("v-row",{staticClass:"fill-height ma-0 pb-7 mb-4",attrs:{align:"center",justify:"center"}},t._l(t.shelfList,(function(e){return i("v-card",{key:e.title,staticClass:"mx-2",attrs:{align:"center",width:"156"},on:{click:function(i){return t.addBookToCart(e)}}},[i("v-img",{staticClass:"grey lighten-2",attrs:{src:""+e.cover,"aspect-ratio":"0.65"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[i("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[i("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),i("v-card-text",[t._v(t._s(e.title))]),i("v-card-text",[t._v(t._s(e.price)+" ฿")])],1)})),1)],1)},G=[],Q=(i("fb6a"),i("96cf"),i("1da1")),Y=(i("d3b7"),i("bc3a")),z=i.n(Y),K=function(){var t=Object(Q["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var i="https://api.jsonbin.io/b/5e69b564d2622e7011565547";z.a.get(i,{}).then((function(e){t(e.data)})).catch((function(t){e(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=K,W={name:"Shelf",data:function(){return{bookList:[],shelfList:[],page:1,bookPerPage:10}},computed:{shelfLength:function(){return this.bookList?Math.ceil(this.bookList.length/this.bookPerPage):1}},beforeMount:function(){this.getBook()},watch:{page:function(){this.shelfList=this.bookList.slice((this.page-1)*this.bookPerPage,this.page*this.bookPerPage)}},methods:{addBookToCart:function(t){this.$store.dispatch("data/addBook",t)},getBook:function(){var t=this;return Object(Q["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:i=e.sent,t.bookList=i.books,t.shelfList=t.bookList.slice((t.page-1)*t.bookPerPage,t.page*t.bookPerPage);case 5:case"end":return e.stop()}}),e)})))()}}},X=W,Z=i("adda"),tt=i("a722"),et=i("891e"),it=i("490a"),nt=i("0fd9"),at=Object(C["a"])(X,q,G,!1,null,null,null),rt=at.exports;L()(at,{VCard:V["a"],VCardText:O["a"],VImg:Z["a"],VLayout:tt["a"],VPagination:et["a"],VProgressCircular:it["a"],VRow:nt["a"]});var ot={name:"Home",components:{Shelf:rt,Cart:F},data:function(){return{drawer:!0}}},ct=ot,st=i("40dc"),lt=i("5bc1"),ut=i("a523"),dt=i("a75b"),ft=i("553a"),ht=i("2a7f"),pt=Object(C["a"])(ct,b,P,!1,null,null,null),vt=pt.exports;L()(pt,{VAppBar:st["a"],VAppBarNavIcon:lt["a"],VContainer:ut["a"],VContent:dt["a"],VFooter:ft["a"],VSpacer:J["a"],VToolbarTitle:ht["a"]});var mt={name:"App",components:{home:vt}},gt=mt,bt=i("7496"),Pt=Object(C["a"])(gt,m,g,!1,null,null,null),kt=Pt.exports;L()(Pt,{VApp:bt["a"]});var _t=i("f309");n["a"].use(_t["a"]);var Ht=new _t["a"]({}),wt=i("8c4f");n["a"].use(wt["a"]);var xt=[{path:"/",name:"Home",component:vt}],Ct=new wt["a"]({routes:xt}),yt=Ct;n["a"].config.productionTip=!1,new n["a"]({vuetify:Ht,store:v,router:yt,render:function(t){return t(kt)}}).$mount("#app")}});
//# sourceMappingURL=app.6d02eb0f.js.map