(function(t){function e(e){for(var n,o,c=e[0],s=e[1],l=e[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,c=1;c<r.length;c++){var s=r[c];0!==i[s]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},i={app:0},a=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/shiba-book-shop/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),i=r("2f62"),a={cartList:[]},o=a,c={},s=c,l={addBook:function(t,e){var r=t.commit;r("addBook",e)},decreaseBook:function(t,e){var r=t.commit;r("decreaseBook",e)},deleteBook:function(t,e){var r=t.commit;r("deleteBook",e)},clearCart:function(t){var e=t.commit;e("clearCart")}},u=l,d=(r("4de4"),r("7db0"),{addBook:function(t,e){t.cartList.find((function(t){return t.title===e.title}))?t.cartList.find((function(t){return t.title===e.title})).count+=1:t.cartList.push({cover:e.cover,id:e.id,price:e.price,title:e.title,count:1})},decreaseBook:function(t,e){t.cartList.find((function(t){return t.title===e.title}))&&(t.cartList.find((function(t){return t.title===e.title})).count>1?t.cartList.find((function(t){return t.title===e.title})).count-=1:t.cartList=t.cartList.filter((function(t){return t.title!==e.title})))},deleteBook:function(t,e){t.cartList=t.cartList.filter((function(t){return t.title!==e.title}))},clearCart:function(t){t.cartList=[]}}),f=d,h={namespaced:!0,state:o,mutations:f,actions:u,getters:s},p=h;n["a"].use(i["a"]);var v=new i["a"].Store({modules:{data:p}}),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("v-app",[r("home")],1)],1)},P=[],b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Cart"),r("v-app-bar",{attrs:{app:"",color:"indigo darken-4",dark:""}},[r("v-spacer"),r("v-toolbar-title",[t._v("Shiba Book Shop")])],1),r("v-content",[r("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[r("Shelf")],1)],1),r("v-footer",{attrs:{color:"indigo darken-4",app:""}},[r("v-spacer"),r("span",{staticClass:"white--text"},[t._v("© 2020")])],1)],1)},g=[],_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-navigation-drawer",{attrs:{app:"",right:"",width:"400"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-simple-table",{attrs:{"fixed-header":"",height:"400px"},scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left",attrs:{id:"name",width:"70%"}},[t._v("Title")]),r("th",{staticClass:"text-left",attrs:{id:"quan",width:"5%"}},[t._v("QTY")]),r("th",{staticClass:"text-left",attrs:{id:"price",width:"25%"}},[t._v("Price")]),r("th",{attrs:{id:"delete",width:"2.5%"}}),r("th",{attrs:{id:"deleteall",width:"2.5%"}})])]),r("tbody",t._l(t.cartList,(function(e){return r("tr",{key:e.title+new Date},[r("td",[t._v(t._s(e.title))]),r("td",[t._v(t._s(e.count))]),r("td",[t._v(t._s(e.count*Number(e.price))+" ฿")]),r("td",[r("v-btn",{attrs:{outlined:"",fab:"","max-width":"25px","max-height":"25px",dark:"",color:"red"},on:{click:function(r){return t.decreaseBook(e)}}},[r("v-icon",[t._v("mdi-minus")])],1)],1),r("td",[r("v-btn",{attrs:{outlined:"",fab:"","max-width":"25px","max-height":"25px",dark:"",color:"red"},on:{click:function(r){return t.deleteBook(e)}}},[r("v-icon",[t._v("mdi-delete")])],1)],1)])})),0)]},proxy:!0}])}),r("v-list",{attrs:{dense:""}},[r("v-divider"),r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",[t._v("Discount")])],1),r("v-list-item-icon",[t._v("- "+t._s(t.discountPrice)+" ฿")])],1),r("v-divider"),r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",[t._v("Total")])],1),r("v-list-item-icon",[t._v(t._s(t.totalPrice)+" ฿")])],1),r("v-list-item",[r("v-list-item-content",[r("v-text-field",{attrs:{mask:"#######",suffix:"THB",label:"Credit"},model:{value:t.credit,callback:function(e){t.credit=e},expression:"credit"}})],1)],1),r("v-list-item",[r("v-list-item-content",[r("v-btn",{attrs:{disabled:t.cartList.length<=0||""===t.credit,color:"white--text indigo darken-4"},on:{click:function(e){return t.Calculate()}}},[t._v("Charge")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"280"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[t.change<0?r("v-card-title",{staticClass:"red--text headline"},[t._v("Not Enough Cash")]):t._e(),t.change<0?r("v-simple-table",{attrs:{height:"150px"},scopedSlots:t._u([{key:"default",fn:function(){return[r("tbody",[r("tr",[r("td",[t._v("Credit")]),r("td",[t._v(t._s(t.credit)+" ฿")])]),r("tr",[r("td",[t._v("Total")]),r("td",[t._v(t._s(t.totalPrice)+" ฿")])]),r("tr",{staticClass:"red--text"},[r("td",[t._v("Need")]),r("td",[t._v(t._s(-t.change)+" ฿")])])])]},proxy:!0}],null,!1,860682637)}):t._e(),t.change>=0?r("v-card-title",{staticClass:"green--text headline"},[t._v(" Purchase Successful")]):t._e(),t.change>=0?r("v-simple-table",{attrs:{"fixed-header":"",height:"150px"},scopedSlots:t._u([{key:"default",fn:function(){return[r("tbody",[r("tr",[r("td",[t._v("Credit")]),r("td",[t._v(t._s(t.credit)+" ฿")])]),r("tr",[r("td",[t._v("Total")]),r("td",[t._v(t._s(t.totalPrice)+" ฿")])]),r("tr",[r("td",[t._v("Change")]),r("td",[t._v(t._s(t.change)+" ฿")])])])]},proxy:!0}],null,!1,3817172676)}):t._e()],1)],1)],1)},H=[],k=(r("4160"),r("a9e3"),r("159b"),r("5530")),x={name:"Cart",data:function(){return{drawer:!0,dialog:!1,credit:"",discountPrice:0,HPBooks:{HP1:null,HP2:null,HP3:null,HP4:null,HP5:null,HP6:null,HP7:null}}},computed:Object(k["a"])(Object(k["a"])({},Object(i["b"])("data",{cartList:function(t){return t.cartList}})),{},{totalPrice:function(){var t=0;return this.cartList.forEach((function(e){t+=e.count*Number(e.price)})),t-=this.discountPrice,t},change:function(){return this.credit-this.totalPrice}}),watch:{dialog:function(){!1===this.dialog&&this.change>=0&&this.clear()}},updated:function(){this.getAllHPBook(),this.CalculateDiscount()},methods:{deleteBook:function(t){this.$store.dispatch("data/deleteBook",t)},decreaseBook:function(t){this.$store.dispatch("data/decreaseBook",t)},Calculate:function(){this.dialog=!0},findHP:function(t){var e=this.cartList.filter((function(e){return e.id===t}));return e.length>0?JSON.parse(JSON.stringify(e[0])):null},getAllHPBook:function(){this.HPBooks={HP1:this.findHP("9781408855652"),HP2:this.findHP("9781408855669"),HP3:this.findHP("9781408855676"),HP4:this.findHP("9781408855683"),HP5:this.findHP("9781408855690"),HP6:this.findHP("9781408855706"),HP7:this.findHP("9781408855713")},console.log(this.HPBooks)},CalculateDiscount:function(){var t=0,e=0,r=[0,0,10,11,12,13,14,15],n=0,i=!0,a=JSON.parse(JSON.stringify(this.HPBooks));while(i){if(a.HP1&&a.HP1.count>0&&(t+=1,a.HP1.count-=1,n+=Number(a.HP1.price)),a.HP2&&a.HP2.count>0&&(t+=1,a.HP2.count-=1,n+=Number(a.HP2.price)),a.HP3&&a.HP3.count>0&&(t+=1,a.HP3.count-=1,n+=Number(a.HP3.price)),a.HP4&&a.HP4.count>0&&(t+=1,a.HP4.count-=1,n+=Number(a.HP4.price)),a.HP5&&a.HP5.count>0&&(t+=1,a.HP5.count-=1,n+=Number(a.HP5.price)),a.HP6&&a.HP6.count>0&&(t+=1,a.HP6.count-=1,n+=Number(a.HP6.price)),a.HP7&&a.HP7.count>0&&(t+=1,a.HP7.count-=1,n+=Number(a.HP7.price)),console.log("series",t),1===t||0===t)return void(this.discountPrice=e);console.log("totalPrice",n),e+=n*r[t]/100,console.log("discountPrice",this.discountPrice),t=0,n=0}},clear:function(){this.$store.dispatch("data/clearCart"),this.credit="",this.discountPrice=0}}},w=x,y=r("2877"),C=r("6544"),B=r.n(C),L=r("8336"),V=r("b0af"),O=r("99d9"),S=r("169a"),j=r("ce7e"),T=r("132d"),N=r("8860"),$=r("da13"),D=r("5d23"),I=r("34c3"),E=r("f774"),J=r("1f4f"),A=r("8654"),M=Object(y["a"])(w,_,H,!1,null,null,null),R=M.exports;B()(M,{VBtn:L["a"],VCard:V["a"],VCardTitle:O["b"],VDialog:S["a"],VDivider:j["a"],VIcon:T["a"],VList:N["a"],VListItem:$["a"],VListItemContent:D["a"],VListItemIcon:I["a"],VListItemTitle:D["b"],VNavigationDrawer:E["a"],VSimpleTable:J["a"],VTextField:A["a"]});var F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{wrap:""}},t._l(t.bookList,(function(e){return r("v-card",{key:e.title,staticClass:"ma-2",attrs:{width:"156"},on:{click:function(r){return t.addBookToCart(e)}}},[r("v-img",{staticClass:"grey lighten-2",attrs:{src:""+e.cover,"aspect-ratio":"0.65"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),r("v-card-text",[t._v(t._s(e.title))]),r("v-card-text",[t._v(t._s(e.price)+" ฿")])],1)})),1)},q=[],Q=(r("96cf"),r("1da1")),Y=(r("d3b7"),r("bc3a")),z=r.n(Y),G=function(){var t=Object(Q["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var r="https://api.jsonbin.io/b/5e69b564d2622e7011565547";z.a.get(r,{}).then((function(e){t(e.data)})).catch((function(t){e(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),K=G,U={name:"Shelf",data:function(){return{bookList:[]}},beforeMount:function(){this.getBook()},methods:{addBookToCart:function(t){this.$store.dispatch("data/addBook",t)},getBook:function(){var t=this;return Object(Q["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:r=e.sent,t.bookList=r.books;case 4:case"end":return e.stop()}}),e)})))()}}},W=U,X=r("adda"),Z=r("a722"),tt=r("490a"),et=r("0fd9"),rt=Object(y["a"])(W,F,q,!1,null,null,null),nt=rt.exports;B()(rt,{VCard:V["a"],VCardText:O["a"],VImg:X["a"],VLayout:Z["a"],VProgressCircular:tt["a"],VRow:et["a"]});var it={name:"Home",components:{Shelf:nt,Cart:R},data:function(){return{}}},at=it,ot=r("40dc"),ct=r("a523"),st=r("a75b"),lt=r("553a"),ut=r("2fa4"),dt=r("2a7f"),ft=Object(y["a"])(at,b,g,!1,null,null,null),ht=ft.exports;B()(ft,{VAppBar:ot["a"],VContainer:ct["a"],VContent:st["a"],VFooter:lt["a"],VSpacer:ut["a"],VToolbarTitle:dt["a"]});var pt={name:"App",components:{home:ht}},vt=pt,mt=r("7496"),Pt=Object(y["a"])(vt,m,P,!1,null,null,null),bt=Pt.exports;B()(Pt,{VApp:mt["a"]});var gt=r("f309");n["a"].use(gt["a"]);var _t=new gt["a"]({}),Ht=r("8c4f");n["a"].use(Ht["a"]);var kt=[{path:"/",name:"Home",component:ht}],xt=new Ht["a"]({routes:kt}),wt=xt;n["a"].config.productionTip=!1,new n["a"]({vuetify:_t,store:v,router:wt,render:function(t){return t(bt)}}).$mount("#app")}});
//# sourceMappingURL=app.c510e3b7.js.map